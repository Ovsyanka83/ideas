

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>token_utils.py &mdash; ideas 0.0.4 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="console.py" href="console.html" />
    <link rel="prev" title="import_hook.py" href="import_hook.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> ideas
          

          
          </a>

          
            
            
              <div class="version">
                0.0.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="motivation.html"> Additional motivation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html"> Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="function_simplest.html"> Create your own</a></li>
<li class="toctree-l1"><a class="reference internal" href="possible.html"> A deep dive</a></li>
<li class="toctree-l1"><a class="reference internal" href="tokenize.html"> About tokens</a></li>
<li class="toctree-l1"><a class="reference internal" href="tokenize_notebook.html"> Tokenize notebook</a></li>
</ul>
<p class="caption"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="function.html"> Improving function as a keyword</a></li>
<li class="toctree-l1"><a class="reference internal" href="lambda.html"> λ encoding and the main problem - to do</a></li>
<li class="toctree-l1"><a class="reference internal" href="nobreak.html"> nobreak as a keyword - to do</a></li>
<li class="toctree-l1"><a class="reference internal" href="french.html"> French Python - to do</a></li>
<li class="toctree-l1"><a class="reference internal" href="auto_self.html"> Auto-self</a></li>
<li class="toctree-l1"><a class="reference internal" href="repeat.html"> repeat as a keyword</a></li>
<li class="toctree-l1"><a class="reference internal" href="ast.html"> Simple AST transformation - to do</a></li>
<li class="toctree-l1"><a class="reference internal" href="bytecode.html"> Simple bytecode transformation - todo</a></li>
<li class="toctree-l1"><a class="reference internal" href="switch.html"> Pythonic switch statement - to do</a></li>
<li class="toctree-l1"><a class="reference internal" href="constants.html"> True constants</a></li>
<li class="toctree-l1"><a class="reference internal" href="json.html"> Json module - todo</a></li>
<li class="toctree-l1"><a class="reference internal" href="pep_505.html"> PEP 505: None-aware operators - to do</a></li>
<li class="toctree-l1"><a class="reference internal" href="non_files.html"> Import from non-standard locations - to do</a></li>
<li class="toctree-l1"><a class="reference internal" href="as_main.html"> Importing a module as main - to do</a></li>
<li class="toctree-l1"><a class="reference internal" href="excluded.html"> Examples never included - first draft</a></li>
</ul>
<p class="caption"><span class="caption-text">API</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="import_hook.html"> import_hook.py</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#"> token_utils.py</a></li>
<li class="toctree-l1"><a class="reference internal" href="console.html"> console.py</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ideas</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>token_utils.py</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/token_utils.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="console.html" class="btn btn-neutral float-right" title="console.py" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="import_hook.html" class="btn btn-neutral float-left" title="import_hook.py" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="module-ideas.token_utils">
<span id="token-utils-py"></span><h1>token_utils.py<a class="headerlink" href="#module-ideas.token_utils" title="Permalink to this headline">¶</a></h1>
<p>token_utils.py</p>
<p>A collection of useful functions and methods to deal with tokenizing
source code.</p>
<dl class="class">
<dt id="ideas.token_utils.Token">
<em class="property">class </em><code class="sig-prename descclassname">ideas.token_utils.</code><code class="sig-name descname">Token</code><span class="sig-paren">(</span><em class="sig-param">token</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ideas/token_utils.html#Token"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ideas.token_utils.Token" title="Permalink to this definition">¶</a></dt>
<dd><p>Token as generated from Python’s tokenize.generate_tokens written here in
a more convenient form, and with some custom methods.</p>
<p>The various parameters are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">:</span> <span class="n">token</span> <span class="nb">type</span>
<span class="n">string</span><span class="p">:</span> <span class="n">the</span> <span class="n">token</span> <span class="n">written</span> <span class="k">as</span> <span class="n">a</span> <span class="n">string</span>
<span class="n">start</span> <span class="o">=</span> <span class="p">(</span><span class="n">start_row</span><span class="p">,</span> <span class="n">start_col</span><span class="p">)</span>
<span class="n">end</span> <span class="o">=</span> <span class="p">(</span><span class="n">end_row</span><span class="p">,</span> <span class="n">end_col</span><span class="p">)</span>
<span class="n">line</span><span class="p">:</span> <span class="n">entire</span> <span class="n">line</span> <span class="n">of</span> <span class="n">code</span> <span class="n">where</span> <span class="n">the</span> <span class="n">token</span> <span class="ow">is</span> <span class="n">found</span><span class="o">.</span>
</pre></div>
</div>
<dl class="method">
<dt id="ideas.token_utils.Token.is_comment">
<code class="sig-name descname">is_comment</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/ideas/token_utils.html#Token.is_comment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ideas.token_utils.Token.is_comment" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if the token is a comment.</p>
</dd></dl>

<dl class="method">
<dt id="ideas.token_utils.Token.is_identifier">
<code class="sig-name descname">is_identifier</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/ideas/token_utils.html#Token.is_identifier"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ideas.token_utils.Token.is_identifier" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <code class="docutils literal notranslate"><span class="pre">True</span></code> if the token represents a valid Python identifier
excluding Python keywords.</p>
<p>Note: this is different from Python’s string method <code class="docutils literal notranslate"><span class="pre">isidentifier</span></code>
which also returns <code class="docutils literal notranslate"><span class="pre">True</span></code> if the string is a keyword.</p>
</dd></dl>

<dl class="method">
<dt id="ideas.token_utils.Token.is_keyword">
<code class="sig-name descname">is_keyword</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/ideas/token_utils.html#Token.is_keyword"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ideas.token_utils.Token.is_keyword" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if the token represents a Python keyword.</p>
</dd></dl>

<dl class="method">
<dt id="ideas.token_utils.Token.is_space">
<code class="sig-name descname">is_space</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/ideas/token_utils.html#Token.is_space"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ideas.token_utils.Token.is_space" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if the token indicates a change in indentation,
the end of a line, or the end of the source.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="ideas.token_utils.dedent">
<code class="sig-prename descclassname">ideas.token_utils.</code><code class="sig-name descname">dedent</code><span class="sig-paren">(</span><em class="sig-param">tokens</em>, <em class="sig-param">dedent</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ideas/token_utils.html#dedent"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ideas.token_utils.dedent" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a list of tokens, produces an equivalent list corresponding
to a line of code with dedent characters removed.</p>
</dd></dl>

<dl class="function">
<dt id="ideas.token_utils.get_first">
<code class="sig-prename descclassname">ideas.token_utils.</code><code class="sig-name descname">get_first</code><span class="sig-paren">(</span><em class="sig-param">tokens</em>, <em class="sig-param">exclude_comment=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ideas/token_utils.html#get_first"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ideas.token_utils.get_first" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a list of tokens, find the first token which is not a space token
(such as a <code class="docutils literal notranslate"><span class="pre">NEWLINE</span></code>, <code class="docutils literal notranslate"><span class="pre">INDENT</span></code>, <code class="docutils literal notranslate"><span class="pre">DEDENT</span></code>, etc.) and,
by default, also not a <code class="docutils literal notranslate"><span class="pre">COMMMENT</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">COMMMENT</span></code> tokens can be included by setting <code class="docutils literal notranslate"><span class="pre">exclude_comment</span></code> to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<p>Returns <code class="docutils literal notranslate"><span class="pre">None</span></code> if none is found.</p>
</dd></dl>

<dl class="function">
<dt id="ideas.token_utils.get_first_index">
<code class="sig-prename descclassname">ideas.token_utils.</code><code class="sig-name descname">get_first_index</code><span class="sig-paren">(</span><em class="sig-param">tokens</em>, <em class="sig-param">exclude_comment=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ideas/token_utils.html#get_first_index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ideas.token_utils.get_first_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a list of tokens, find the index of the first token which is
not a space token (such as a <code class="docutils literal notranslate"><span class="pre">NEWLINE</span></code>, <code class="docutils literal notranslate"><span class="pre">INDENT</span></code>, <code class="docutils literal notranslate"><span class="pre">DEDENT</span></code>, etc.) nor
a <code class="docutils literal notranslate"><span class="pre">COMMMENT</span></code>. If it is desired to include COMMENT, set <code class="docutils literal notranslate"><span class="pre">exclude_comment</span></code>
to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<p>Returns <code class="docutils literal notranslate"><span class="pre">None</span></code> if none is found.</p>
</dd></dl>

<dl class="function">
<dt id="ideas.token_utils.get_last">
<code class="sig-prename descclassname">ideas.token_utils.</code><code class="sig-name descname">get_last</code><span class="sig-paren">(</span><em class="sig-param">tokens</em>, <em class="sig-param">exclude_comment=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ideas/token_utils.html#get_last"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ideas.token_utils.get_last" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a list of tokens, find the last token which is not a space token
(such as a <code class="docutils literal notranslate"><span class="pre">NEWLINE</span></code>, <code class="docutils literal notranslate"><span class="pre">INDENT</span></code>, <code class="docutils literal notranslate"><span class="pre">DEDENT</span></code>, etc.) and, by default, also not a <code class="docutils literal notranslate"><span class="pre">COMMMENT</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">COMMMENT</span></code> tokens can be included by setting <code class="docutils literal notranslate"><span class="pre">exclude_comment</span></code> to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<p>Returns <code class="docutils literal notranslate"><span class="pre">None</span></code> if none is found.</p>
</dd></dl>

<dl class="function">
<dt id="ideas.token_utils.get_last_index">
<code class="sig-prename descclassname">ideas.token_utils.</code><code class="sig-name descname">get_last_index</code><span class="sig-paren">(</span><em class="sig-param">tokens</em>, <em class="sig-param">exclude_comment=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ideas/token_utils.html#get_last_index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ideas.token_utils.get_last_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a list of tokens, find the index of the last token which is
not a space token (such as a <code class="docutils literal notranslate"><span class="pre">NEWLINE</span></code>, <code class="docutils literal notranslate"><span class="pre">INDENT</span></code>, <code class="docutils literal notranslate"><span class="pre">DEDENT</span></code>, etc.) nor
a <code class="docutils literal notranslate"><span class="pre">COMMMENT</span></code>. If it is desired to include COMMENT, set <code class="docutils literal notranslate"><span class="pre">exclude_comment</span></code>
to True.</p>
<p>Returns <code class="docutils literal notranslate"><span class="pre">None</span></code> if none is found.</p>
</dd></dl>

<dl class="function">
<dt id="ideas.token_utils.get_lines">
<code class="sig-prename descclassname">ideas.token_utils.</code><code class="sig-name descname">get_lines</code><span class="sig-paren">(</span><em class="sig-param">source</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ideas/token_utils.html#get_lines"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ideas.token_utils.get_lines" title="Permalink to this definition">¶</a></dt>
<dd><p>Transforms a source (string) into a list of Tokens, with each
(inner) list containing all the tokens found on a given line of code.</p>
</dd></dl>

<dl class="function">
<dt id="ideas.token_utils.get_number">
<code class="sig-prename descclassname">ideas.token_utils.</code><code class="sig-name descname">get_number</code><span class="sig-paren">(</span><em class="sig-param">tokens</em>, <em class="sig-param">exclude_comment=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ideas/token_utils.html#get_number"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ideas.token_utils.get_number" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a list of tokens, gives a count of the number of
tokens which are not space tokens (such as <code class="docutils literal notranslate"><span class="pre">NEWLINE</span></code>, <code class="docutils literal notranslate"><span class="pre">INDENT</span></code>,
<code class="docutils literal notranslate"><span class="pre">DEDENT</span></code>, etc.)</p>
<p>By default, <code class="docutils literal notranslate"><span class="pre">COMMMENT</span></code> tokens are not included in the count.
If you wish to include them, set <code class="docutils literal notranslate"><span class="pre">exclude_comment</span></code> to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd></dl>

<dl class="function">
<dt id="ideas.token_utils.print_tokens">
<code class="sig-prename descclassname">ideas.token_utils.</code><code class="sig-name descname">print_tokens</code><span class="sig-paren">(</span><em class="sig-param">source</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ideas/token_utils.html#print_tokens"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ideas.token_utils.print_tokens" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints tokens found in source, excluding spaces and comments.</p>
<p><code class="docutils literal notranslate"><span class="pre">source</span></code> is either a string to be tokenized, or a list of Token objects.</p>
<p>This is occasionally useful as a debugging tool.</p>
</dd></dl>

<dl class="function">
<dt id="ideas.token_utils.tokenize">
<code class="sig-prename descclassname">ideas.token_utils.</code><code class="sig-name descname">tokenize</code><span class="sig-paren">(</span><em class="sig-param">source</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ideas/token_utils.html#tokenize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ideas.token_utils.tokenize" title="Permalink to this definition">¶</a></dt>
<dd><p>Transforms a source (string) into a list of Tokens.</p>
</dd></dl>

<dl class="function">
<dt id="ideas.token_utils.untokenize">
<code class="sig-prename descclassname">ideas.token_utils.</code><code class="sig-name descname">untokenize</code><span class="sig-paren">(</span><em class="sig-param">tokens</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ideas/token_utils.html#untokenize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ideas.token_utils.untokenize" title="Permalink to this definition">¶</a></dt>
<dd><p>Return source code based on tokens.</p>
<p>This is similar to Python’s own tokenize.untokenize(), except that it
preserves spacing between tokens, by using the line
information recorded by Python’s tokenize.generate_tokens.
As a result, if the original soure code had multiple spaces between
some tokens or if escaped newlines were used or if tab characters
were present in the original source, those will also be present
in the source code produced by untokenize.</p>
<p>Thus <code class="docutils literal notranslate"><span class="pre">source</span> <span class="pre">==</span> <span class="pre">untokenize(tokenize(source))</span></code>.</p>
<p>Note: if you you modifying tokens from an original source:</p>
<p>Instead of full token object, <code class="docutils literal notranslate"><span class="pre">untokenize</span></code> will accept simple
strings; however, it will only insert them <em>as is</em> without taking them
into account when it comes with figuring out spacing between tokens.</p>
<p>Adapted from <a class="reference external" href="https://github.com/myint/untokenize">https://github.com/myint/untokenize</a></p>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="console.html" class="btn btn-neutral float-right" title="console.py" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="import_hook.html" class="btn btn-neutral float-left" title="import_hook.py" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, André Roberge

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>