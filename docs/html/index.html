

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Ideas: making it easier to extend Python’s syntax &mdash; ideas 0.0.5 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Additional motivation for this project" href="motivation.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="#" class="icon icon-home"> ideas
          

          
          </a>

          
            
            
              <div class="version">
                0.0.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="motivation.html"> Additional motivation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html"> Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="function_simplest.html"> Create your own</a></li>
<li class="toctree-l1"><a class="reference internal" href="possible.html"> A deep dive</a></li>
<li class="toctree-l1"><a class="reference internal" href="tokenize.html"> About tokens</a></li>
<li class="toctree-l1"><a class="reference internal" href="tokenize_notebook.html"> Tokenizing notebook</a></li>
</ul>
<p class="caption"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="function.html"> Improving function as a keyword</a></li>
<li class="toctree-l1"><a class="reference internal" href="lambda.html"> λ encoding</a></li>
<li class="toctree-l1"><a class="reference internal" href="nobreak.html"> nobreak as a keyword</a></li>
<li class="toctree-l1"><a class="reference internal" href="repeat.html"> repeat as a keyword</a></li>
<li class="toctree-l1"><a class="reference internal" href="french.html"> French Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="auto_self.html"> Auto-self</a></li>
<li class="toctree-l1"><a class="reference internal" href="ast.html"> Fractional math (AST)</a></li>
<li class="toctree-l1"><a class="reference internal" href="bytecode.html"> Confused math (Bytecode)</a></li>
<li class="toctree-l1"><a class="reference internal" href="constants.html"> True constants</a></li>
<li class="toctree-l1"><a class="reference internal" href="switch.html"> Pythonic switch statement - to do</a></li>
<li class="toctree-l1"><a class="reference internal" href="excluded.html"> Examples never included - first draft</a></li>
</ul>
<p class="caption"><span class="caption-text">Other modules</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="import_hook.html"> import_hook.py</a></li>
<li class="toctree-l1"><a class="reference internal" href="console.html"> console.py</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">ideas</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="#">Docs</a> &raquo;</li>
        
      <li>Ideas: making it easier to extend Python’s syntax</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="motivation.html" class="btn btn-neutral float-right" title="Additional motivation for this project" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="ideas-making-it-easier-to-extend-python-s-syntax">
<h1>Ideas: making it easier to extend Python’s syntax<a class="headerlink" href="#ideas-making-it-easier-to-extend-python-s-syntax" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://github.com/aroberge/ideas">Code on Github</a></p>
<a class="reference internal image-reference" href="_images/ideas.png"><img alt="ideas logo" class="align-center" src="_images/ideas.png" style="width: 740.0px; height: 516.4px;" /></a>
<p>You have an <strong>Excellent Idea</strong> ® to change the Python syntax and want
to find a way to include your
<strong>Excellent Idea</strong> ®  in your Python programs.
According to <a class="reference external" href="https://devguide.python.org/langchanges/">Python Developers Guide</a>,
this might be doable if you are willing to follow “a few steps” including:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Get a copy of the CPython’s code repository and all the required compilers
for your platform.</p></li>
<li><p>Modify the grammar file to add rules for the new syntax.</p></li>
<li><p>Modify the AST generation code; this requires a knowledge of C</p></li>
<li><p>Compile the AST into bytecode</p></li>
<li><p>Recompile the modified Python interpreter</p></li>
</ol>
</div></blockquote>
<p>This … can be a rather daunting task. It might get a bit easier if
you grab a copy of the currently unpublished book by Anthony Shaw,
<em>CPython Internals</em> and read it from cover to cover,
but it will still remain a major task. Furthermore, it would not be easy
to share your work with others so that they can try it out.</p>
<p>However, <strong>there is a simpler way:</strong> it is possible to run code with a
modified syntax using import hooks [<em>or, in some cases as shown later,
using a custom codec</em>.]</p>
<div class="section" id="what-is-an-import-hook">
<h2>What is an import hook<a class="headerlink" href="#what-is-an-import-hook" title="Permalink to this headline">¶</a></h2>
<div class="sidebar">
<p class="sidebar-title">Skipping over details.</p>
<p>This is a simplified description. A more detailed explanation will
be given later.</p>
</div>
<p>When you write something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">my_module</span>
</pre></div>
</div>
<p>Python’s import machinery has to do the following:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Try to use various tools to find the module requested</p></li>
<li><p>Get the source code of that module</p></li>
<li><p>Execute that source code, subject to some information reported in step 1.</p></li>
</ol>
</div></blockquote>
<p>An import hook is an additional tool that you create to do these three steps.
Once written, you add it to <code class="docutils literal notranslate"><span class="pre">sys.meta_path</span></code> so that Python’s import
machinery can make use of it.</p>
<p>Still, writing import hooks can be rather difficult.</p>
<blockquote>
<div><div class="line-block">
<div class="line">[page 420] <em>…it should be emphasized that Python’s module, package and import
mechanism is one of the most complicated parts of the entire language –
often poorly understood by even the most seasoned Python programmers
unless they’ve devoted effort to peeling back the covers.</em></div>
<div class="line-block">
<div class="line">… long discussion …</div>
</div>
<div class="line">[page 428] <em>Assuming that your head hasn’t completely exploded at this point, …
Last, but not least, spending some time sleeping with PEP 302 and the
documentation for</em> importlib <em>under your pillow may be advisable.</em></div>
</div>
<blockquote>
<div><p><strong>Python Cookbook, 3rd edition, by David Beazley and Brian K. Jones</strong></p>
</div></blockquote>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">ideas</span></code> is designed to facilitate
the creation of such import hooks, and be a repository for
examples that can be used as starting points for new ideas.</p>
<p>Instead of figuring out how to write an import hook, using <code class="docutils literal notranslate"><span class="pre">ideas</span></code> you
can focus exclusively on what what might be needed to convert your proposed new
syntax into something that Python can understand – <code class="docutils literal notranslate"><span class="pre">ideas</span></code> will
take care of the rest, including inserting it in <code class="docutils literal notranslate"><span class="pre">sys.meta_path</span></code>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Doing something like what is described in this documentation
is not recommended for production code.</p>
<p>But it can be fun! ;-)</p>
</div>
</div>
<div class="section" id="infrequently-asked-questions-and-comments">
<h2>Infrequently asked questions and comments<a class="headerlink" href="#infrequently-asked-questions-and-comments" title="Permalink to this headline">¶</a></h2>
<div class="sidebar">
<p class="sidebar-title">No FAQ</p>
<p>In the absence of real questions having yet been asked,
the following imaginary dialogue has been written before anyone else knew about
this project.</p>
</div>
<p><strong>Why?</strong></p>
<p>Because it is fun. If this is not enough of a justification for you, have a look at
the motivation section which contains a longer, and possibly more serious answer.</p>
<p><strong>Is it safe to use in production code?</strong></p>
<p>No.</p>
<p><strong>But your example works perfectly well in my code; can I use it in my project?</strong></p>
<p>I don’t think you should if your project is to be used by anyone else
but yourself.</p>
<p><strong>I found a bug.</strong></p>
<p>Wonderful, please file an issue so that I can perhaps fix it. Note however
that some examples are just proof of concepts and are known to not be robust.</p>
<p><strong>Can I contribute code for a new example?</strong></p>
<p>Yes, please, by all means. But I suggest that you first create an issue that gives
an overview of what you wish to accomplish.</p>
<p><strong>I found a cool use of import hooks in another project, different from all of your examples.</strong></p>
<p>Please, give me the details and I will see if I can <em>easily</em> include
a similar example and if I think it is worthwhile to do so.</p>
<p><strong>I think that the explanation you have written for X could be improved upon.</strong></p>
<p>Please tell me more by filing an issue first and possibly creating a pull-request afterwards.</p>
<p><strong>I have an idea for a new example, but do not know how to write the code for it.</strong></p>
<p>First, make sure you go through all of the existing examples to confirm that
none can easily be adapted to do what you want.
If that is the case, file an issue …
but please don’t be offended if I don’t write code for it
and end up closing the issue: I already have too many ideas of my own
for this project, too many other projects, and not
enough time to do all that I want.</p>
<p><strong>What about something like</strong> <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">__future__</span> <span class="pre">import</span> <span class="pre">braces</span></code> <strong>?</strong></p>
<p>No.</p>
<p><strong>In file X.py, you do not respect convention Y from PEP-8. This is unacceptable
in a Python project.</strong></p>
<p><em>Seriously?</em>  This project is all about exploring potential changes
to Python’s syntax, some of which are downright crazy, and you complain
about a PEP-8 violation? …</p>
<p>Ok, perhaps you can tell me and it might make sense to change what I wrote.</p>
<p><strong>People from the Python-ideas mailing lists mentioned that I should look
at this project for my suggestion for a new syntax, but I don’t know where to start.</strong></p>
<p>Just keep reading.</p>
</div>
<div class="section" id="quick-links-to-topics">
<h2>Quick links to topics<a class="headerlink" href="#quick-links-to-topics" title="Permalink to this headline">¶</a></h2>
<div class="sidebar">
<p class="sidebar-title">Work in progress</p>
<p>Much more content will be added … <em>soon</em>.</p>
</div>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="motivation.html"> Additional motivation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html"> Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="function_simplest.html"> Create your own</a></li>
<li class="toctree-l1"><a class="reference internal" href="possible.html"> A deep dive</a></li>
<li class="toctree-l1"><a class="reference internal" href="tokenize.html"> About tokens</a></li>
<li class="toctree-l1"><a class="reference internal" href="tokenize_notebook.html"> Tokenizing notebook</a></li>
</ul>
</div>
<div class="toctree-wrapper compound">
<p class="caption"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="function.html"> Improving function as a keyword</a></li>
<li class="toctree-l1"><a class="reference internal" href="lambda.html"> λ encoding</a></li>
<li class="toctree-l1"><a class="reference internal" href="nobreak.html"> nobreak as a keyword</a></li>
<li class="toctree-l1"><a class="reference internal" href="repeat.html"> repeat as a keyword</a></li>
<li class="toctree-l1"><a class="reference internal" href="french.html"> French Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="auto_self.html"> Auto-self</a></li>
<li class="toctree-l1"><a class="reference internal" href="ast.html"> Fractional math (AST)</a></li>
<li class="toctree-l1"><a class="reference internal" href="bytecode.html"> Confused math (Bytecode)</a></li>
<li class="toctree-l1"><a class="reference internal" href="constants.html"> True constants</a></li>
<li class="toctree-l1"><a class="reference internal" href="switch.html"> Pythonic switch statement - to do</a></li>
<li class="toctree-l1"><a class="reference internal" href="excluded.html"> Examples never included - first draft</a></li>
</ul>
</div>
<div class="toctree-wrapper compound">
<p class="caption"><span class="caption-text">Other modules</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="import_hook.html"> import_hook.py</a></li>
<li class="toctree-l1"><a class="reference internal" href="console.html"> console.py</a></li>
</ul>
</div>
</div>
<div class="section" id="to-do">
<h2>To do<a class="headerlink" href="#to-do" title="Permalink to this headline">¶</a></h2>
<div class="admonition-todo admonition">
<p class="admonition-title">Todo</p>
<p>Try to create a different module object.</p>
</div>
<p class="todo-source">(The <a class="reference internal" href="constants.html#id1"><em>original entry</em></a> is located in C:\Users\andre\github\ideas\docs\source\constants.rst, line 121.)</p>
<div class="admonition-todo admonition">
<p class="admonition-title">Todo</p>
<p><strong>Add these examples</strong></p>
<p>I need to add some explanations and provide links to the following examples:</p>
<ul class="simple">
<li><p>importing “best answer” from StackOverflow</p></li>
<li><p>installing module from pypi on request (David Beazley’s talk)</p></li>
</ul>
<p>etc.</p>
</div>
<p class="todo-source">(The <a class="reference internal" href="excluded.html#id1"><em>original entry</em></a> is located in C:\Users\andre\github\ideas\docs\source\excluded.rst, line 26.)</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="motivation.html" class="btn btn-neutral float-right" title="Additional motivation for this project" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, André Roberge

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>